
<!DOCTYPE html>
<html lang="ja">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="../../../../../theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="../../../../../theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="../../../../../theme/font-awesome/css/font-awesome.min.css">





  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />


<meta name="author" content="Ryo KOBAYASHI" />
<meta name="description" content="MangaFox is a manga database site which provide a lot of mangas traslated to English. (I don't know if their copyrights are OK...) Anyways, when you want to read mangas hosted at the site, you have to have the internet connection. But, for example, if you want to read mangas …" />
<meta name="keywords" content="python, code-reading">
<meta property="og:site_name" content="R.K.S. blog"/>
<meta property="og:title" content="MangaFox-Download-Script"/>
<meta property="og:description" content="MangaFox is a manga database site which provide a lot of mangas traslated to English. (I don't know if their copyrights are OK...) Anyways, when you want to read mangas hosted at the site, you have to have the internet connection. But, for example, if you want to read mangas …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="../../../../../posts/2016/03/20/code-reading-mangafox-download-script/index.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2016-03-20 14:32:50+09:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="../../../../../author/ryo-kobayashi.html">
<meta property="article:section" content="misc"/>
<meta property="article:tag" content="python"/>
<meta property="article:tag" content="code-reading"/>
<meta property="og:image" content="http://ryokbys.github.io/blog//images/yoda-and-me.png">

  <title>R.K.S. blog &ndash; MangaFox-Download-Script</title>

</head>
<body>
  <aside>
    <div>
      <a href="../../../../..">
        <img src="http://ryokbys.github.io/blog//images/yoda-and-me.png" alt="R.K.S. blog" title="R.K.S. blog">
      </a>
      <h1><a href="../../../../..">R.K.S. blog</a></h1>

<p>Live as if you were to die tomorrow. Learn as if you were to live forever.</p>
      <nav>
        <ul class="list">

          <!-- <li><a href="http://ryokbys.github.io/blog//archives.html" target="_blank">Archives</a></li> -->
          <li><a href="http://ryokbys.github.io/blog//archives.html" >Archives</a></li>
          <!-- <li><a href="http://ryokbys.github.io/blog//tags.html" target="_blank">Tags</a></li> -->
          <li><a href="http://ryokbys.github.io/blog//tags.html" >Tags</a></li>
        </ul>
      </nav>

      <ul class="social">
      </ul>
    </div>


  </aside>
  <main>


<article class="single">
  <header>
    <h1 id="code-reading-mangafox-download-script">MangaFox-Download-Script</h1>
    <p>
          Posted on Sun 20 March 2016 in <a href="../../../../../category/misc.html">misc</a>


    </p>
  </header>


  <div class="tag-cloud">
    <p>
      <a href="../../../../../tag/python.html">python</a>
      <a href="../../../../../tag/code-reading.html">code-reading</a>
    </p>
  </div>
  <div>
    <p><a class="reference external" href="http://mangafox.me">MangaFox</a> is a manga database site which provide a lot of mangas traslated to English.
(I don't know if their copyrights are OK...)
Anyways, when you want to read mangas hosted at the site, you have to have the internet connection.
But, for example, if you want to read mangas during long flight or travelling abroad where the internet connection is not available,
basically you cannot read those mangas.
Since so many people want to download whole chapter or volume of mangas to their portable,
there are some scripts and programs that can download <strong>manga</strong> data from MangaFox or other sites.</p>
<p><a class="reference external" href="https://github.com/techwizrd/MangaFox-Download-Script">MangaFox-Download-Script</a> is one of those scripts.
Since I was interested in how to do scraping website using <strong>Python</strong> with some useful modules,
I read the script and learned some from the script.
Here is my memorandum of the code-reading.</p>
<div class="section" id="usage-of-mangafox-download-script">
<h2>Usage of MangaFox-Download-Script</h2>
<p>The script is open at github.</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/techwizrd/MangaFox-Download-Script">techwizrd/MangaFox-Download-Script</a></li>
</ul>
<p>And its usage is simple.</p>
<pre class="literal-block">
$ python mfdl.py [manga_name]
or
$ python mfdl.py [manga_name] [chapter_number]
or
$ python mfdl.py [manga_name] [chapter_start] [chapter_end]
</pre>
</div>
<div class="section" id="bugfix">
<h2>Bugfix</h2>
<p>The script does not work without the following bugfix.</p>
<p>Original form of the <tt class="docutils literal">get_page_soup</tt>, which translates webpage data to a <tt class="docutils literal">BeautifulSoup</tt> object,
is written with <tt class="docutils literal">urllib.urlopen()</tt> as,</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_page_soup</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Download a page and return a BeautifulSoup object of the html&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">closing</span><span class="p">(</span><span class="n">urllib</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">))</span> <span class="k">as</span> <span class="n">html_file</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">html_file</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</pre></div>
<p>but this did not work for a specific webpage in MangaFox presumably because of text encoding problem.
So I changed the code as follows.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_page_soup</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Download a page and return a BeautifulSoup object of the html&quot;&quot;&quot;</span>
    <span class="n">req</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">encoding</span><span class="p">))</span>
</pre></div>
</div>
<div class="section" id="things-learned-from-this-code-reading">
<h2>Things learned from this code-reading</h2>
<div class="section" id="beautifulsoup-bs">
<h3>BeautifulSoup (BS)</h3>
<p>It is a library which enables us to parse <strong>html</strong> and <strong>xml</strong>.
So the BS helps us to analyze websites without coding a lot about messy task about parsing html.</p>
<p>There seems to be alternatives for BS, such as <strong>lxml</strong> which is more efficient than BS since it uses C libraries.</p>
<p>It is easy to create a BS object from the website URL by doing</p>
<div class="highlight"><pre><span></span><span class="n">req</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="k">return</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">text</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">req</span><span class="o">.</span><span class="n">encoding</span><span class="p">))</span>
</pre></div>
</div>
<div class="section" id="lambda-expression">
<h3>Lambda expression</h3>
<p>I did not know <em>lambda expression</em> can be used in python, or maybe I have heard of that...</p>
<p>The deffinition of it is</p>
<div class="highlight"><pre><span></span><span class="k">lambda</span> <span class="o">&lt;</span><span class="n">arg1</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">arg2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">arg3</span><span class="o">&gt;</span><span class="p">,</span><span class="o">...</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">expression</span><span class="o">&gt;</span>
</pre></div>
<p>and you can use like the following</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">func</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">:</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="n">z</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="mi">6</span>
</pre></div>
<p>To be honest, I still don't know how useful it is, but it can be used even where you can not use <tt class="docutils literal">def</tt> statements like,</p>
<div class="highlight"><pre><span></span><span class="o">&gt;&gt;&gt;</span> <span class="n">l</span> <span class="o">=</span> <span class="p">[(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="o">**</span><span class="mi">3</span><span class="p">)]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
<span class="o">...</span>     <span class="k">print</span> <span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="o">...</span>
<span class="mi">4</span>
<span class="mi">8</span>
</pre></div>
</div>
</div>

  </div>




</article>

    <footer>
<p>&copy; Ryo KOBAYASHI </p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>





<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " R.K.S. blog ",
  "url" : "../../../../..",
  "image": "http://ryokbys.github.io/blog//images/yoda-and-me.png",
  "description": ""
}
</script>
</body>
</html>