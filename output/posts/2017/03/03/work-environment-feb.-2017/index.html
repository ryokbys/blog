
<!DOCTYPE html>
<html lang="ja">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="../../../../../theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="../../../../../theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="../../../../../theme/font-awesome/css/font-awesome.min.css">


    <link href="http://ryokbys.web.nitech.ac.jp/contents/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="R.K.S. blog Atom">



  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />


<meta name="author" content="Ryo KOBAYASHI" />
<meta name="description" content="最近，近年で最もコンピュータ上での作業環境が変化したので，僕の作業環境を紹介してみる． 前提として，自分の仕事上，どのような作業が多いかを挙げておく． ローカルマシン（MacBook）にてプログラム作成，結果の解析，文書作成など 研究室にあるクラスタマシンにて小規模並列計算，パラメータ並列計算（小さな計算を大量に） 名大スパコンを利用して大規模並列計算，小規模大量計算 上記のように，いくつかの異なるサーバーにて種々の異なる作業を行っている． そのため，どのサーバの，どのディレクトリで，どのような作業を行っているかを把握するのがかなり面倒になっていた．また，サーバに接続し直すたびにその作業ディレクトリに移動し直したりするのがかなりの時間のロスだったようだ（これは，それが当然と思っていたときには気づかないものだった）． 最近，以下の２つ技術の導入したことで，（少なくとも気分的には）かなり楽になった． tmux ターミナル・マルチプレクサと呼ばれるもので， 一つの画面でいくつものターミナルを立ち上げて，それらを切り替えることができる tmux自体がデーモンのようにバッググラウンドで走っており，リモートホストでtmuxが起動している場合，接続が切れたとしても，接続し直すと以前の作業に復帰できる． この 2 が本当に良い機能で，使ってみないと「そんなものかね」的に思うが，一度使ったら最後，これがないリモートサーバで作業する気などなくなってしまう …" />
<meta name="keywords" content="mac, linux, research">
<meta property="og:site_name" content="R.K.S. blog"/>
<meta property="og:title" content="2017年初頭における作業環境"/>
<meta property="og:description" content="最近，近年で最もコンピュータ上での作業環境が変化したので，僕の作業環境を紹介してみる． 前提として，自分の仕事上，どのような作業が多いかを挙げておく． ローカルマシン（MacBook）にてプログラム作成，結果の解析，文書作成など 研究室にあるクラスタマシンにて小規模並列計算，パラメータ並列計算（小さな計算を大量に） 名大スパコンを利用して大規模並列計算，小規模大量計算 上記のように，いくつかの異なるサーバーにて種々の異なる作業を行っている． そのため，どのサーバの，どのディレクトリで，どのような作業を行っているかを把握するのがかなり面倒になっていた．また，サーバに接続し直すたびにその作業ディレクトリに移動し直したりするのがかなりの時間のロスだったようだ（これは，それが当然と思っていたときには気づかないものだった）． 最近，以下の２つ技術の導入したことで，（少なくとも気分的には）かなり楽になった． tmux ターミナル・マルチプレクサと呼ばれるもので， 一つの画面でいくつものターミナルを立ち上げて，それらを切り替えることができる tmux自体がデーモンのようにバッググラウンドで走っており，リモートホストでtmuxが起動している場合，接続が切れたとしても，接続し直すと以前の作業に復帰できる． この 2 が本当に良い機能で，使ってみないと「そんなものかね」的に思うが，一度使ったら最後，これがないリモートサーバで作業する気などなくなってしまう …"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="../../../../../posts/2017/03/03/work-environment-feb.-2017/index.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2017-03-03 22:36:38+09:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="../../../../../author/ryo-kobayashi.html">
<meta property="article:section" content="misc"/>
<meta property="article:tag" content="mac"/>
<meta property="article:tag" content="linux"/>
<meta property="article:tag" content="research"/>
<meta property="og:image" content="http://ryokbys.web.nitech.ac.jp/contents/blog/images/yoda-and-me.png">

  <title>R.K.S. blog &ndash; 2017年初頭における作業環境</title>

</head>
<body>
  <aside>
    <div>
      <a href="../../../../..">
        <img src="http://ryokbys.web.nitech.ac.jp/contents/blog/images/yoda-and-me.png" alt="R.K.S. blog" title="R.K.S. blog">
      </a>
      <h1><a href="../../../../..">R.K.S. blog</a></h1>

<p>Live as if you were to die tomorrow. Learn as if you were to live forever.</p>
      <nav>
        <ul class="list">

          <!-- <li><a href="http://ryokbys.web.nitech.ac.jp/contents/blog/archives.html" target="_blank">Archives</a></li> -->
          <li><a href="http://ryokbys.web.nitech.ac.jp/contents/blog/archives.html" >Archives</a></li>
          <!-- <li><a href="http://ryokbys.web.nitech.ac.jp/contents/blog/tags.html" target="_blank">Tags</a></li> -->
          <li><a href="http://ryokbys.web.nitech.ac.jp/contents/blog/tags.html" >Tags</a></li>
        </ul>
      </nav>

      <ul class="social">
      </ul>
    </div>


  </aside>
  <main>


<article class="single">
  <header>
    <h1 id="work-environment-feb.-2017">2017年初頭における作業環境</h1>
    <p>
          Posted on Fri 03 March 2017 in <a href="../../../../../category/misc.html">misc</a>


    </p>
  </header>


  <div class="tag-cloud">
    <p>
      <a href="../../../../../tag/mac.html">mac</a>
      <a href="../../../../../tag/linux.html">linux</a>
      <a href="../../../../../tag/research.html">research</a>
    </p>
  </div>
  <div>
    <p>最近，近年で最もコンピュータ上での作業環境が変化したので，僕の作業環境を紹介してみる．
前提として，自分の仕事上，どのような作業が多いかを挙げておく．</p>
<ul>
<li>ローカルマシン（MacBook）にてプログラム作成，結果の解析，文書作成など</li>
<li>研究室にあるクラスタマシンにて小規模並列計算，パラメータ並列計算（小さな計算を大量に）</li>
<li>名大スパコンを利用して大規模並列計算，小規模大量計算</li>
</ul>
<p>上記のように，<strong>いくつかの異なるサーバーにて種々の異なる作業を行っている</strong>．
そのため，どのサーバの，どのディレクトリで，どのような作業を行っているかを把握するのがかなり面倒になっていた．また，サーバに接続し直すたびにその作業ディレクトリに移動し直したりするのがかなりの時間のロスだったようだ（これは，それが当然と思っていたときには気づかないものだった）．
最近，以下の２つ技術の導入したことで，（少なくとも気分的には）かなり楽になった．</p>
<h2>tmux</h2>
<p>ターミナル・マルチプレクサと呼ばれるもので，</p>
<ol>
<li>一つの画面でいくつものターミナルを立ち上げて，それらを切り替えることができる</li>
<li><code>tmux</code>自体がデーモンのようにバッググラウンドで走っており，リモートホストで<code>tmux</code>が起動している場合，接続が切れたとしても，接続し直すと以前の作業に復帰できる．</li>
</ol>
<p>この <strong>2</strong> が本当に良い機能で，使ってみないと「そんなものかね」的に思うが，一度使ったら最後，これがないリモートサーバで作業する気などなくなってしまう．そのくらい良い機能．</p>
<p>インストールや設定の仕方，使い方などはすでにインターネット上にいろいろと出回っているので，ここには記載しないが，いくつかのキーバインドは自分が便利と思うものを載せておく．
以下のような内容で <code>~/.tmux.conf</code> を保存しておくことで，自分の好きな設定ができている（ほとんどどこかのウェブサイトから取ってきたものだが，どこかを忘れてしまった）．</p>
<div class="highlight"><pre><span></span><code># <span class="nv">Prefix</span>変更 <span class="nv">C</span><span class="o">-</span><span class="nv">b</span> <span class="o">-&gt;</span> <span class="nv">C</span><span class="o">-</span><span class="nv">t</span>
<span class="nv">set</span><span class="o">-</span><span class="nv">option</span> <span class="o">-</span><span class="nv">g</span> <span class="nv">prefix</span> <span class="nv">C</span><span class="o">-</span><span class="nv">t</span>
<span class="nv">bind</span><span class="o">-</span><span class="nv">key</span> <span class="nv">C</span><span class="o">-</span><span class="nv">t</span> <span class="k">send</span><span class="o">-</span><span class="nv">prefix</span>
<span class="nv">unbind</span><span class="o">-</span><span class="nv">key</span> <span class="nv">C</span><span class="o">-</span><span class="nv">b</span>

# 設定再読込キーバインド
<span class="nv">unbind</span> <span class="nv">r</span>
<span class="nv">bind</span> <span class="nv">r</span> <span class="nv">source</span><span class="o">-</span><span class="nv">file</span> <span class="o">~/</span>.<span class="nv">tmux</span>.<span class="nv">conf</span> \<span class="c1">; display &quot;Reloaded ~/.tmux.conf&quot;</span>

# <span class="nv">key</span> <span class="nv">bind</span> <span class="ss">(</span><span class="nv">window</span>の移動<span class="ss">)</span>
# カーソルキーで移動
<span class="nv">bind</span> <span class="o">-</span><span class="nv">n</span> <span class="nv">left</span> <span class="nv">previous</span><span class="o">-</span><span class="nv">window</span>
<span class="nv">bind</span> <span class="o">-</span><span class="nv">n</span> <span class="nv">right</span> <span class="k">next</span><span class="o">-</span><span class="nv">window</span>

# <span class="nv">key</span> <span class="nv">bind</span> <span class="ss">(</span><span class="nv">pane</span>の移動<span class="ss">)</span>
# <span class="nv">Shift</span> <span class="o">+</span> カーソルキーで移動
<span class="nv">bind</span> <span class="o">-</span><span class="nv">n</span> <span class="nv">S</span><span class="o">-</span><span class="nv">left</span> <span class="nv">select</span><span class="o">-</span><span class="nv">pane</span> <span class="o">-</span><span class="nv">L</span>
<span class="nv">bind</span> <span class="o">-</span><span class="nv">n</span> <span class="nv">S</span><span class="o">-</span><span class="nv">down</span> <span class="nv">select</span><span class="o">-</span><span class="nv">pane</span> <span class="o">-</span><span class="nv">D</span>
<span class="nv">bind</span> <span class="o">-</span><span class="nv">n</span> <span class="nv">S</span><span class="o">-</span><span class="nv">up</span> <span class="nv">select</span><span class="o">-</span><span class="nv">pane</span> <span class="o">-</span><span class="nv">U</span>
<span class="nv">bind</span> <span class="o">-</span><span class="nv">n</span> <span class="nv">S</span><span class="o">-</span><span class="nv">right</span> <span class="nv">select</span><span class="o">-</span><span class="nv">pane</span> <span class="o">-</span><span class="nv">R</span>

# <span class="mi">256</span>色端末を使用する
<span class="nv">set</span><span class="o">-</span><span class="nv">option</span> <span class="o">-</span><span class="nv">g</span> <span class="nv">default</span><span class="o">-</span><span class="nv">terminal</span> <span class="s2">&quot;</span><span class="s">tmux-256color</span><span class="s2">&quot;</span>
# <span class="nv">vi</span>のキーバインドを使用する
# <span class="nv">set</span><span class="o">-</span><span class="nv">window</span><span class="o">-</span><span class="nv">option</span> <span class="o">-</span><span class="nv">g</span> <span class="nv">mode</span><span class="o">-</span><span class="nv">keys</span> <span class="nv">vi</span>

# ステータスバー設定
<span class="nv">set</span> <span class="o">-</span><span class="nv">g</span> <span class="nv">status</span><span class="o">-</span><span class="nv">interval</span> <span class="mi">10</span>
<span class="nv">set</span> <span class="o">-</span><span class="nv">g</span> <span class="nv">status</span><span class="o">-</span><span class="nv">bg</span> <span class="nv">colour100</span>
<span class="nv">setw</span> <span class="o">-</span><span class="nv">g</span> <span class="nv">window</span><span class="o">-</span><span class="nv">status</span><span class="o">-</span><span class="nv">current</span><span class="o">-</span><span class="nv">fg</span> <span class="nv">black</span>
<span class="nv">setw</span> <span class="o">-</span><span class="nv">g</span> <span class="nv">window</span><span class="o">-</span><span class="nv">status</span><span class="o">-</span><span class="nv">current</span><span class="o">-</span><span class="nv">bg</span> <span class="nv">white</span>

# <span class="nv">split</span> <span class="nv">panes</span> <span class="nv">using</span> <span class="o">|</span> <span class="nv">and</span> <span class="o">-</span>
<span class="nv">bind</span> <span class="nv">h</span> <span class="nv">split</span><span class="o">-</span><span class="nv">window</span> <span class="o">-</span><span class="nv">h</span>
<span class="nv">bind</span> <span class="nv">v</span> <span class="nv">split</span><span class="o">-</span><span class="nv">window</span> <span class="o">-</span><span class="nv">v</span>
<span class="nv">unbind</span> <span class="s1">&#39;</span><span class="s">&quot;</span><span class="s1">&#39;</span>
<span class="nv">unbind</span> <span class="o">%</span>
</code></pre></div>


<ul>
<li>prefixを <code>C-t</code> に変更</li>
<li>矢印の左右で，windowを切り替える</li>
<li>prefix + <code>h</code> でウィンドウを横（horizontal）分割</li>
<li>prefix + <code>v</code> でウィンドウを縦（vertical）分割</li>
<li><code>Shift</code>+ 上下左右でペインを切り替えるとなっているが，Shift+上下がうまく働いていないため，<code>C-t</code> + <code>o</code> で切り替えている．</li>
</ul>
<h2>Jupyter notebook</h2>
<p>もう一つは，jupyter notebook．
これは，ブラウザ上でプログラムを作成し，簡単に実行して結果を確認できるもの．自分の場合はたいてい python でなんらかの軽い処理をする際に重宝している．
良い点としては，</p>
<ol>
<li>すぐに結果が見れる</li>
<li>カード毎に実行できるため，以前に書いた一箇所だけを実行とかできる</li>
<li>Markdownでコメントを書き込める</li>
<li>数式も書ける</li>
<li>グラフや画像なども挿入できる</li>
<li>リモートサーバー上のnotebookをローカルのブラウザで実行できる</li>
</ol>
<p>これらが可能なため，実際に何らかの解析作業などを行う場合，何をどうやるかやをMarkdownで書きながら実際にコードも書いて，実行した結果も一つのノートの上に表示されていく感じ．実験ノートを書きながら解析作業を行えているようなもので，後から見ても思考の過程をたどることができる．</p>
<p>そして， <strong>6</strong> ができるため，ちょっと重たい作業を行ってもローカルマシンがヒートアップしたり遅くなったりしないのが良い．</p>
<p>インストールは <strong>pyenv</strong> を入れた後に，<strong>anaconda</strong> をインストールすれば自動的についてくる（便利な世の中になったものだ）．</p>
<p>この２つの技術は全く独立しているものだが，リモートサーバー上でjupyter notebookを使うに際して，<code>tmux</code>が役に立つ．
<code>tmux</code>をリモートサーバーで一度起動しておけば，ログアウトしても，プロセスを起動し続けることができるから，jupyter notebookをリモートサーバー上で常時起動させておくことが可能になる．これはまたかなり便利（これも体験してみないとなかなか便利さが伝わらないと思うが）．</p>
<h2>おまけ</h2>
<h3><a href="https://yhatt.github.io/marp/">Marp</a></h3>
<p>日本人が作成した，Markdownでスライドを作れるアプリ．機能としては，</p>
<ul>
<li>Markdownで記述する</li>
<li>リアルタイム（just-in-time?）でスライドが更新される</li>
<li>コード，数式，図を扱える</li>
</ul>
<p>これでかなり楽にスライドを作れるから便利．</p>
<h3><a href="http://happenapps.com/#quiver">Quiver</a></h3>
<p>Programmer's notebookという触れ込みだが，プログラム実行のできないjupyter notebookを束ねたEvernoteのようなもので，それだけ効くと何が良いのか分からない．
何が良いかというと，</p>
<ul>
<li>ノートを取って後から検索できる．</li>
<li>Markdownでメモを取れる．</li>
<li>ノートがcell単位で成り立っており，各セルで，Markdown，コード，数式（LaTeX）などの形式を選択することができる．</li>
<li>ノートカテゴリを分けたりタグを付けたりといったEvernote的なこともできる．</li>
</ul>
<p>実際に使ってみると，プログラミングに関連したほぼすべてのことをメモするのには事足りるので，Evernoteよりも便利と思う．</p>
  </div>




</article>

    <footer>
<p>&copy; Ryo KOBAYASHI </p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p>    </footer>
  </main>

<!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36370521-4', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->



<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " R.K.S. blog ",
  "url" : "../../../../..",
  "image": "http://ryokbys.web.nitech.ac.jp/contents/blog/images/yoda-and-me.png",
  "description": ""
}
</script>
</body>
</html>